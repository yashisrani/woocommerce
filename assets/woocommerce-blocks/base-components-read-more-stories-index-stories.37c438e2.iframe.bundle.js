"use strict";(self.webpackChunk_woocommerce_block_library=self.webpackChunk_woocommerce_block_library||[]).push([[8971],{"./assets/js/base/components/read-more/stories/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),build_module=__webpack_require__("../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js");function getCharArr(rowCut){let subRow,match,char,charArr=[];for(let i=0;i<rowCut.length;i++)subRow=rowCut.substring(i),match=subRow.match(/^&[a-z0-9#]+;/),match?(char=match[0],charArr.push(char),i+=char.length-1):charArr.push(rowCut[i]);return charArr}const truncateHtml=(html,length,ellipsis="...")=>{const trimmed=function trimHtml(html,options){const limit=(options=options||{}).limit||100,preserveTags=void 0===options.preserveTags||options.preserveTags,wordBreak=void 0!==options.wordBreak&&options.wordBreak,suffix=options.suffix||"...",moreLink=options.moreLink||"",moreText=options.moreText||"»",preserveWhiteSpace=options.preserveWhiteSpace||!1,arr=html.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n");let row,cut,add,rowCut,tagMatch,tagName,sum=0,tagStack=[],more=!1;for(let i=0;i<arr.length;i++){if(row=arr[i],rowCut=preserveWhiteSpace?row:row.replace(/[ ]+/g," "),!row.length)continue;const charArr=getCharArr(rowCut);if("<"!==row[0])if(sum>=limit)row="";else if(sum+charArr.length>=limit){if(cut=limit-sum," "===charArr[cut-1])for(;cut&&(cut-=1," "===charArr[cut-1]););else add=charArr.slice(cut).indexOf(" "),wordBreak||(-1!==add?cut+=add:cut=row.length);row=charArr.slice(0,cut).join("")+suffix,moreLink&&(row+='<a href="'+moreLink+'" style="display:inline">'+moreText+"</a>"),sum=limit,more=!0}else sum+=charArr.length;else if(preserveTags){if(sum>=limit)if(tagMatch=row.match(/[a-zA-Z]+/),tagName=tagMatch?tagMatch[0]:"",tagName)if("</"!==row.substring(0,2))tagStack.push(tagName),row="";else{for(;tagStack[tagStack.length-1]!==tagName&&tagStack.length;)tagStack.pop();tagStack.length&&(row=""),tagStack.pop()}else row=""}else row="";arr[i]=row}return{html:arr.join("\n").replace(/\n/g,""),more}}(html,{suffix:ellipsis,limit:length});return trimmed.html},moveMarkers=(markers,currentHeight,maxHeight)=>(currentHeight<=maxHeight?markers.start=markers.middle+1:markers.end=markers.middle-1,markers),clampLines=(originalContent,targetElement,maxHeight,ellipsis)=>{const length=((originalContent,targetElement,maxHeight)=>{let markers={start:0,middle:0,end:originalContent.length};for(;markers.start<=markers.end;)markers.middle=Math.floor((markers.start+markers.end)/2),targetElement.innerHTML=truncateHtml(originalContent,markers.middle),markers=moveMarkers(markers,targetElement.clientHeight,maxHeight);return markers.middle})(originalContent,targetElement,maxHeight);return truncateHtml(originalContent,length-ellipsis.length,ellipsis)};var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js");const defaultProps={className:"read-more-content",ellipsis:"&hellip;",lessText:(0,build_module.__)("Read less","woocommerce"),maxLines:3,moreText:(0,build_module.__)("Read more","woocommerce")};class ReadMore extends react.Component{static defaultProps=defaultProps;constructor(props){super(props),this.state={isExpanded:!1,clampEnabled:null,content:props.children,summary:"."},this.reviewContent=(0,react.createRef)(),this.reviewSummary=(0,react.createRef)(),this.getButton=this.getButton.bind(this),this.onClick=this.onClick.bind(this)}componentDidMount(){this.setSummary()}componentDidUpdate(prevProps){prevProps.maxLines===this.props.maxLines&&prevProps.children===this.props.children||this.setState({clampEnabled:null,summary:"."},this.setSummary)}setSummary(){if(this.props.children){const{maxLines,ellipsis}=this.props;if(!this.reviewSummary.current||!this.reviewContent.current)return;const maxHeight=(this.reviewSummary.current.clientHeight+1)*maxLines+1,clampEnabled=this.reviewContent.current.clientHeight+1>maxHeight;this.setState({clampEnabled}),clampEnabled&&this.setState({summary:clampLines(this.reviewContent.current.innerHTML,this.reviewSummary.current,maxHeight,ellipsis)})}}getButton(){const{isExpanded}=this.state,{className,lessText,moreText}=this.props,buttonText=isExpanded?lessText:moreText;if(buttonText)return(0,jsx_runtime.jsx)("a",{href:"#more",className:className+"__read_more",onClick:this.onClick,"aria-expanded":!isExpanded,role:"button",children:buttonText})}onClick(e){e.preventDefault();const{isExpanded}=this.state;this.setState({isExpanded:!isExpanded})}render(){const{className}=this.props,{content,summary,clampEnabled,isExpanded}=this.state;return content?!1===clampEnabled?(0,jsx_runtime.jsx)("div",{className,children:(0,jsx_runtime.jsx)("div",{ref:this.reviewContent,children:content})}):(0,jsx_runtime.jsxs)("div",{className,children:[(!isExpanded||null===clampEnabled)&&(0,jsx_runtime.jsx)("div",{ref:this.reviewSummary,"aria-hidden":isExpanded,dangerouslySetInnerHTML:{__html:summary}}),(isExpanded||null===clampEnabled)&&(0,jsx_runtime.jsx)("div",{ref:this.reviewContent,"aria-hidden":!isExpanded,children:content}),this.getButton()]}):null}}ReadMore.displayName="ReadMore",ReadMore.__docgenInfo={description:"Show text based content, limited to a number of lines, with a read more link.\n\nBased on https://github.com/zoltantothcom/react-clamp-lines.",methods:[{name:"setSummary",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"getButton",docblock:null,modifiers:[],params:[],returns:{type:{name:"union",raw:"JSX.Element | undefined",elements:[{name:"JSX.Element"},{name:"undefined"}]}}},{name:"onClick",docblock:"Handles the click event for the read more/less button.",modifiers:[],params:[{name:"e",type:{name:"MouseEvent",elements:[{name:"HTMLAnchorElement"},{name:"MouseEvent"}],raw:"MouseEvent< HTMLAnchorElement, MouseEvent >",alias:"MouseEvent"}}],returns:{type:{name:"void"}},description:"Handles the click event for the read more/less button."}],displayName:"ReadMore",props:{className:{defaultValue:{value:"'read-more-content'",computed:!1},required:!1,tsType:{name:"string"},description:"Class names for the wrapped component"},ellipsis:{defaultValue:{value:"'&hellip;'",computed:!1},required:!1,tsType:{name:"string"},description:"What symbol to show after the allowed lines are reached\n\n@default '&hellip';"},lessText:{defaultValue:{value:"__( 'Read less', 'woocommerce' )",computed:!0},required:!1,tsType:{name:"string"},description:"The string to show to collapse the entire text into its clamped form\n\n@default 'Read less'"},maxLines:{defaultValue:{value:"3",computed:!1},required:!1,tsType:{name:"number"},description:"How many lines to show before the text is clamped\n\n@default 3"},moreText:{defaultValue:{value:"__( 'Read more', 'woocommerce' )",computed:!0},required:!1,tsType:{name:"string"},description:"The string to show to expande the entire text\n\n@default 'Read more'"},children:{required:!0,tsType:{name:"ReactNode"},description:"The entire content to clamp"}}};const read_more=ReadMore;ReadMore.__docgenInfo={description:"Show text based content, limited to a number of lines, with a read more link.\n\nBased on https://github.com/zoltantothcom/react-clamp-lines.",methods:[{name:"setSummary",docblock:null,modifiers:[],params:[],returns:{type:{name:"void"}}},{name:"getButton",docblock:null,modifiers:[],params:[],returns:{type:{name:"union",raw:"JSX.Element | undefined",elements:[{name:"JSX.Element"},{name:"undefined"}]}}},{name:"onClick",docblock:"Handles the click event for the read more/less button.",modifiers:[],params:[{name:"e",optional:!1,type:{name:"MouseEvent",elements:[{name:"HTMLAnchorElement"},{name:"MouseEvent"}],raw:"MouseEvent< HTMLAnchorElement, MouseEvent >",alias:"MouseEvent"}}],returns:{type:{name:"void"}},description:"Handles the click event for the read more/less button."}],displayName:"ReadMore",props:{children:{required:!0,tsType:{name:"ReactNode"},description:"The entire content to clamp"},className:{required:!1,tsType:{name:"string"},description:"Class names for the wrapped component",defaultValue:{value:"'read-more-content'",computed:!1}},ellipsis:{required:!1,tsType:{name:"string"},description:"What symbol to show after the allowed lines are reached\n\n@default '&hellip';",defaultValue:{value:"'&hellip;'",computed:!1}},lessText:{required:!1,tsType:{name:"string"},description:"The string to show to collapse the entire text into its clamped form\n\n@default 'Read less'",defaultValue:{value:"__( 'Read less', 'woocommerce' )",computed:!0}},maxLines:{required:!1,tsType:{name:"number"},description:"How many lines to show before the text is clamped\n\n@default 3",defaultValue:{value:"3",computed:!1}},moreText:{required:!1,tsType:{name:"string"},description:"The string to show to expande the entire text\n\n@default 'Read more'",defaultValue:{value:"__( 'Read more', 'woocommerce' )",computed:!0}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/read-more/index.tsx"]={name:"ReadMore",docgenInfo:ReadMore.__docgenInfo,path:"assets/js/base/components/read-more/index.tsx"});const index_stories={title:"Base Components/ReadMore",component:read_more,args:defaultProps,argTypes:{children:{control:{disable:!0}}}},LongText=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h1",{children:"No! Alderaan is peaceful. We have no weapons. You can't possibly…"}),(0,jsx_runtime.jsx)("p",{children:"As you wish. But with the blast shield down, I can't even see! How am I supposed to fight? Look, I ain't in this for your revolution, and I'm not in it for you, Princess. I expect to be well paid. I'm in it for the money."}),(0,jsx_runtime.jsxs)("p",{children:["You mean it controls your actions?",(0,jsx_runtime.jsxs)("strong",{children:[" ","She must have hidden the plans in the escape pod."]})," ",(0,jsx_runtime.jsx)("em",{children:"Send a detachment down to retrieve them, and see to it personally, Commander."}),"There'll be no one to stop us this time!"]}),(0,jsx_runtime.jsx)("h2",{children:"Escape is not his plan. I must face him, alone."}),(0,jsx_runtime.jsxs)("ol",{children:[(0,jsx_runtime.jsx)("li",{children:"Partially, but it also obeys your commands."}),(0,jsx_runtime.jsx)("li",{children:"Leave that to me. Send a distress signal, and inform the Senate that all on board were killed."}),(0,jsx_runtime.jsx)("li",{children:"A tremor in the Force. The last time I felt it was in the presence of my old master."})]}),(0,jsx_runtime.jsx)("aside",{children:(0,jsx_runtime.jsx)("a",{href:"http://fillerama.io",children:'Content from http://fillerama.io "Star Wars"'})})]}),Template=args=>(0,jsx_runtime.jsx)(read_more,{...args});Template.displayName="Template";const Default=Template.bind({});Default.args={children:LongText,maxLines:6},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <ReadMore {...args} />",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);