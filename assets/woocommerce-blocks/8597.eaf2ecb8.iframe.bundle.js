/*! For license information please see 8597.eaf2ecb8.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_woocommerce_block_library=self.webpackChunk_woocommerce_block_library||[]).push([[8597],{"../../node_modules/.pnpm/@wordpress+components@26.0.6_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_@types+r_n7b35c4244ex2obcybry7a4swy/node_modules/@wordpress/components/build-module/slot-fill/bubbles-virtually/slot-fill-context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>slot_fill_context});var vanilla=__webpack_require__("../../node_modules/.pnpm/valtio@1.7.0_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_babel-plugin-macros@3.1.0_react@18.3.1/node_modules/valtio/esm/vanilla.js");Symbol();function proxyMap(entries){const map=(0,vanilla.BX)({data:Array.from(entries||[]),has(key){return this.data.some((p=>p[0]===key))},set(key,value){const record=this.data.find((p=>p[0]===key));return record?record[1]=value:this.data.push([key,value]),this},get(key){var _a;return null==(_a=this.data.find((p=>p[0]===key)))?void 0:_a[1]},delete(key){const index=this.data.findIndex((p=>p[0]===key));return-1!==index&&(this.data.splice(index,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON:()=>({}),forEach(cb){this.data.forEach((p=>{cb(p[1],p[0],this)}))},keys(){return this.data.map((p=>p[0])).values()},values(){return this.data.map((p=>p[1])).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(map,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(map),map}var react=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");const logged=new Set;function warning(message){if(function isDev(){return"undefined"!=typeof SCRIPT_DEBUG&&!0===SCRIPT_DEBUG}()&&!logged.has(message)){console.warn(message);try{throw Error(message)}catch(x){}logged.add(message)}}const initialContextValue={slots:proxyMap(),fills:proxyMap(),registerSlot:()=>{"undefined"!=typeof SCRIPT_DEBUG&&!0===SCRIPT_DEBUG&&warning("Components must be wrapped within `SlotFillProvider`. See https://developer.wordpress.org/block-editor/components/slot-fill/")},updateSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{},isDefault:!0},slot_fill_context=(0,react.createContext)(initialContextValue)},"../../node_modules/.pnpm/@wordpress+components@26.0.6_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_@types+r_n7b35c4244ex2obcybry7a4swy/node_modules/@wordpress/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useSlotFills});var valtio__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/valtio@1.7.0_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_babel-plugin-macros@3.1.0_react@18.3.1/node_modules/valtio/esm/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),_slot_fill_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@wordpress+components@26.0.6_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_@types+r_n7b35c4244ex2obcybry7a4swy/node_modules/@wordpress/components/build-module/slot-fill/bubbles-virtually/slot-fill-context.js");function useSlotFills(name){const registry=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(_slot_fill_context__WEBPACK_IMPORTED_MODULE_1__.A);return(0,valtio__WEBPACK_IMPORTED_MODULE_2__.sT)(registry.fills,{sync:!0}).get(name)}},"../../node_modules/.pnpm/@wordpress+components@26.0.6_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_@types+r_n7b35c4244ex2obcybry7a4swy/node_modules/@wordpress/components/build-module/slot-fill/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QJ:()=>createSlotFill});var react=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");const initialValue={registerSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{},getSlot:()=>{},getFills:()=>[],subscribe:()=>()=>{}},context=(0,react.createContext)(initialValue),use_slot=name=>{const{getSlot,subscribe}=(0,react.useContext)(context);return(0,react.useSyncExternalStore)(subscribe,(()=>getSlot(name)),(()=>getSlot(name)))};function Fill({name,children}){const{registerFill,unregisterFill}=(0,react.useContext)(context),slot=use_slot(name),ref=(0,react.useRef)({name,children});return(0,react.useLayoutEffect)((()=>{const refValue=ref.current;return registerFill(name,refValue),()=>unregisterFill(name,refValue)}),[]),(0,react.useLayoutEffect)((()=>{ref.current.children=children,slot&&slot.forceUpdate()}),[children]),(0,react.useLayoutEffect)((()=>{name!==ref.current.name&&(unregisterFill(ref.current.name,ref.current),ref.current.name=name,registerFill(name,ref.current))}),[name]),null}function isFunction(maybeFunc){return"function"==typeof maybeFunc}class SlotComponent extends react.Component{constructor(props){super(props),this.isUnmounted=!1}componentDidMount(){const{registerSlot}=this.props;this.isUnmounted=!1,registerSlot(this.props.name,this)}componentWillUnmount(){const{unregisterSlot}=this.props;this.isUnmounted=!0,unregisterSlot(this.props.name,this)}componentDidUpdate(prevProps){const{name,unregisterSlot,registerSlot}=this.props;prevProps.name!==name&&(unregisterSlot(prevProps.name,this),registerSlot(name,this))}forceUpdate(){this.isUnmounted||super.forceUpdate()}render(){var _getFills;const{children,name,fillProps={},getFills}=this.props,fills=(null!==(_getFills=getFills(name,this))&&void 0!==_getFills?_getFills:[]).map((fill=>{const fillChildren=isFunction(fill.children)?fill.children(fillProps):fill.children;return react.Children.map(fillChildren,((child,childIndex)=>{if(!child||"string"==typeof child)return child;let childKey=childIndex;return"object"==typeof child&&"key"in child&&child?.key&&(childKey=child.key),(0,react.cloneElement)(child,{key:childKey})}))})).filter((element=>!(element=>"number"!=typeof element&&("string"==typeof element?.valueOf()||Array.isArray(element)?!element.length:!element))(element)));return(0,react.createElement)(react.Fragment,null,isFunction(children)?children(fills):fills)}}const slot=props=>(0,react.createElement)(context.Consumer,null,(({registerSlot,unregisterSlot,getFills})=>(0,react.createElement)(SlotComponent,{...props,registerSlot,unregisterSlot,getFills})));var react_dom=__webpack_require__("../../node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/index.js"),esm=__webpack_require__("../../node_modules/.pnpm/valtio@1.7.0_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_babel-plugin-macros@3.1.0_react@18.3.1/node_modules/valtio/esm/index.js"),slot_fill_context=__webpack_require__("../../node_modules/.pnpm/@wordpress+components@26.0.6_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_@types+r_n7b35c4244ex2obcybry7a4swy/node_modules/@wordpress/components/build-module/slot-fill/bubbles-virtually/slot-fill-context.js");var emotion_element_c39617d8_browser_esm=__webpack_require__("../../node_modules/.pnpm/@emotion+react@11.11.1_@types+react@17.0.71_react@18.3.1/node_modules/@emotion/react/dist/emotion-element-c39617d8.browser.esm.js"),emotion_cache_browser_esm=__webpack_require__("../../node_modules/.pnpm/@emotion+cache@11.11.0/node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js"),v4=__webpack_require__("../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js");const uuidCache=new Set,containerCacheMap=new WeakMap;const style_provider=function StyleProvider(props){const{children,document}=props;if(!document)return null;const cache=(container=>{if(containerCacheMap.has(container))return containerCacheMap.get(container);let key=v4.A().replace(/[0-9]/g,"");for(;uuidCache.has(key);)key=v4.A().replace(/[0-9]/g,"");uuidCache.add(key);const cache=(0,emotion_cache_browser_esm.default)({container,key});return containerCacheMap.set(container,cache),cache})(document.head);return(0,react.createElement)(emotion_element_c39617d8_browser_esm.C,{value:cache},children)};function fill_Fill(props){var _slot$fillProps;const{name,children}=props,{registerFill,unregisterFill,...slot}=function use_slot_useSlot(name){const registry=(0,react.useContext)(slot_fill_context.A);return{...(0,esm.sT)(registry.slots,{sync:!0}).get(name),...(0,react.useMemo)((()=>({updateSlot:fillProps=>registry.updateSlot(name,fillProps),unregisterSlot:ref=>registry.unregisterSlot(name,ref),registerFill:ref=>registry.registerFill(name,ref),unregisterFill:ref=>registry.unregisterFill(name,ref)})),[name,registry])}}(name),rerender=function useForceUpdate(){const[,setState]=(0,react.useState)({}),mounted=(0,react.useRef)(!0);return(0,react.useEffect)((()=>(mounted.current=!0,()=>{mounted.current=!1})),[]),()=>{mounted.current&&setState({})}}(),ref=(0,react.useRef)({rerender});if((0,react.useEffect)((()=>(registerFill(ref),()=>{unregisterFill(ref)})),[registerFill,unregisterFill]),!slot.ref||!slot.ref.current)return null;const wrappedChildren=(0,react.createElement)(style_provider,{document:slot.ref.current.ownerDocument},"function"==typeof children?children(null!==(_slot$fillProps=slot.fillProps)&&void 0!==_slot$fillProps?_slot$fillProps:{}):children);return(0,react_dom.createPortal)(wrappedChildren,slot.ref.current)}function assignRef(ref,value){"function"==typeof ref?ref(value):ref&&ref.hasOwnProperty("current")&&(ref.current=value)}function useMergeRefs(refs){const element=(0,react.useRef)(),isAttached=(0,react.useRef)(!1),didElementChange=(0,react.useRef)(!1),previousRefs=(0,react.useRef)([]),currentRefs=(0,react.useRef)(refs);return currentRefs.current=refs,(0,react.useLayoutEffect)((()=>{!1===didElementChange.current&&!0===isAttached.current&&refs.forEach(((ref,index)=>{const previousRef=previousRefs.current[index];ref!==previousRef&&(assignRef(previousRef,null),assignRef(ref,element.current))})),previousRefs.current=refs}),refs),(0,react.useLayoutEffect)((()=>{didElementChange.current=!1})),(0,react.useCallback)((value=>{assignRef(element,value),didElementChange.current=!0,isAttached.current=null!==value;const refsToAssign=value?currentRefs.current:previousRefs.current;for(const ref of refsToAssign)assignRef(ref,value)}),[])}const View=(0,__webpack_require__("../../node_modules/.pnpm/@emotion+styled@11.11.0_@emotion+react@11.11.1_@types+react@17.0.71_react@18.3.1__@types+react@17.0.71_react@18.3.1/node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").default)("div",{target:"e19lxcc00"})("");View.selector=".components-view",View.displayName="View";const component=View;const bubbles_virtually_slot=(0,react.forwardRef)((function slot_Slot(props,forwardedRef){const{name,fillProps={},as,children,...restProps}=props,{registerSlot,unregisterSlot,...registry}=(0,react.useContext)(slot_fill_context.A),ref=(0,react.useRef)(null);return(0,react.useLayoutEffect)((()=>(registerSlot(name,ref,fillProps),()=>{unregisterSlot(name,ref)})),[registerSlot,unregisterSlot,name]),(0,react.useLayoutEffect)((()=>{registry.updateSlot(name,fillProps)})),(0,react.createElement)(component,{as,ref:useMergeRefs([forwardedRef,ref]),...restProps})}));function slot_fill_Fill(props){return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(Fill,{...props}),(0,react.createElement)(fill_Fill,{...props}))}const slot_fill_Slot=(0,react.forwardRef)((function UnforwardedSlot(props,ref){const{bubblesVirtually,...restProps}=props;return bubblesVirtually?(0,react.createElement)(bubbles_virtually_slot,{...restProps,ref}):(0,react.createElement)(slot,{...restProps})}));function createSlotFill(key){const baseName="symbol"==typeof key?key.description:key,FillComponent=props=>(0,react.createElement)(slot_fill_Fill,{name:key,...props});FillComponent.displayName=`${baseName}Fill`;const SlotComponent=props=>(0,react.createElement)(slot_fill_Slot,{name:key,...props});return SlotComponent.displayName=`${baseName}Slot`,SlotComponent.__unstableName=key,{Fill:FillComponent,Slot:SlotComponent}}},"../../node_modules/.pnpm/proxy-compare@2.3.0/node_modules/proxy-compare/dist/index.modern.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ai:()=>g,Hq:()=>y,JR:()=>O,OC:()=>b,tz:()=>i});const e=Symbol(),t=Symbol(),r=Symbol();let n=(e,t)=>new Proxy(e,t);const o=Object.getPrototypeOf,s=new WeakMap,c=e=>e&&(s.has(e)?s.get(e):o(e)===Object.prototype||o(e)===Array.prototype),l=e=>"object"==typeof e&&null!==e,a=new WeakMap,f=e=>e[r]||e,i=(s,l,p)=>{if(!c(s))return s;const y=f(s),u=(e=>Object.isFrozen(e)||Object.values(Object.getOwnPropertyDescriptors(e)).some((e=>!e.writable)))(y);let g=p&&p.get(y);return g&&g[1].f===u||(g=((n,o)=>{const s={f:o};let c=!1;const l=(t,r)=>{if(!c){let o=s.a.get(n);o||(o=new Set,s.a.set(n,o)),r&&o.has(e)||o.add(t)}},a={get:(e,t)=>t===r?n:(l(t),i(e[t],s.a,s.c)),has:(e,r)=>r===t?(c=!0,s.a.delete(n),!0):(l(r),r in e),getOwnPropertyDescriptor:(e,t)=>(l(t,!0),Object.getOwnPropertyDescriptor(e,t)),ownKeys:t=>(l(e),Reflect.ownKeys(t))};return o&&(a.set=a.deleteProperty=()=>!1),[a,s]})(y,u),g[1].p=n(u?(e=>{let t=a.get(e);if(!t){if(Array.isArray(e))t=Array.from(e);else{const r=Object.getOwnPropertyDescriptors(e);Object.values(r).forEach((e=>{e.configurable=!0})),t=Object.create(o(e),r)}a.set(e,t)}return t})(y):y,g[0]),p&&p.set(y,g)),g[1].a=l,g[1].c=p,g[1].p},p=(e,t)=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some(((e,t)=>e!==n[t]))},y=(t,r,n,o)=>{if(Object.is(t,r))return!1;if(!l(t)||!l(r))return!0;const s=n.get(f(t));if(!s)return!0;if(o){const e=o.get(t);if(e&&e.n===r)return e.g;o.set(t,{n:r,g:!1})}let c=null;for(const l of s){const s=l===e?p(t,r):y(t[l],r[l],n,o);if(!0!==s&&!1!==s||(c=s),c)break}return null===c&&(c=!0),o&&o.set(t,{n:r,g:c}),c},g=e=>c(e)&&e[r]||null,b=(e,t=!0)=>{s.set(e,t)},O=(e,t)=>{const r=[],n=new WeakSet,o=(e,s)=>{if(n.has(e))return;l(e)&&n.add(e);const c=l(e)&&t.get(f(e));c?c.forEach((t=>{o(e[t],s?[...s,t]:[t])})):s&&r.push(s)};return o(e),r}},"../../node_modules/.pnpm/use-sync-external-store@1.2.0_react@18.3.1/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var e=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");var k="function"==typeof Object.is?Object.is:function h(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function r(a){var b=a.getSnapshot;a=a.value;try{var d=b();return!k(a,d)}catch(f){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function t(a,b){return b()}:function q(a,b){var d=b(),f=l({inst:{value:d,getSnapshot:b}}),c=f[0].inst,g=f[1];return n((function(){c.value=d,c.getSnapshot=b,r(c)&&g({inst:c})}),[a,d,b]),m((function(){return r(c)&&g({inst:c}),a((function(){r(c)&&g({inst:c})}))}),[a]),p(d),d};exports.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u},"../../node_modules/.pnpm/use-sync-external-store@1.2.0_react@18.3.1/node_modules/use-sync-external-store/shim/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("../../node_modules/.pnpm/use-sync-external-store@1.2.0_react@18.3.1/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js")},"../../node_modules/.pnpm/valtio@1.7.0_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_babel-plugin-macros@3.1.0_react@18.3.1/node_modules/valtio/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{sT:()=>useSnapshot});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),proxy_compare__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/proxy-compare@2.3.0/node_modules/proxy-compare/dist/index.modern.js"),use_sync_external_store_shim_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/use-sync-external-store@1.2.0_react@18.3.1/node_modules/use-sync-external-store/shim/index.js"),valtio_vanilla__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/valtio@1.7.0_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_babel-plugin-macros@3.1.0_react@18.3.1/node_modules/valtio/esm/vanilla.js");const{useSyncExternalStore}=use_sync_external_store_shim_index_js__WEBPACK_IMPORTED_MODULE_1__,useAffectedDebugValue=(state,affected)=>{const pathList=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{pathList.current=(0,proxy_compare__WEBPACK_IMPORTED_MODULE_2__.JR)(state,affected)})),(0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(pathList.current)};function useSnapshot(proxyObject,options){const notifyInSync=null==options?void 0:options.sync,lastSnapshot=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),lastAffected=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();let inRender=!0;const currSnapshot=useSyncExternalStore((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((callback=>{const unsub=(0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_3__.B1)(proxyObject,callback,notifyInSync);return callback(),unsub}),[proxyObject,notifyInSync]),(()=>{const nextSnapshot=(0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_3__.P9)(proxyObject);try{if(!inRender&&lastSnapshot.current&&lastAffected.current&&!(0,proxy_compare__WEBPACK_IMPORTED_MODULE_2__.Hq)(lastSnapshot.current,nextSnapshot,lastAffected.current,new WeakMap))return lastSnapshot.current}catch(e){}return nextSnapshot}),(()=>(0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_3__.P9)(proxyObject)));inRender=!1;const currAffected=new WeakMap;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{lastSnapshot.current=currSnapshot,lastAffected.current=currAffected})),useAffectedDebugValue(currSnapshot,currAffected);const proxyCache=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>new WeakMap),[]);return(0,proxy_compare__WEBPACK_IMPORTED_MODULE_2__.tz)(currSnapshot,currAffected,proxyCache)}},"../../node_modules/.pnpm/valtio@1.7.0_@babel+helper-module-imports@7.24.7_@babel+types@7.25.2_babel-plugin-macros@3.1.0_react@18.3.1/node_modules/valtio/esm/vanilla.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B1:()=>subscribe,BX:()=>proxy,P9:()=>snapshot});var proxy_compare__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/proxy-compare@2.3.0/node_modules/proxy-compare/dist/index.modern.js");const isObject=x=>"object"==typeof x&&null!==x,refSet=new WeakSet,VERSION=Symbol("VERSION"),LISTENERS=Symbol("LISTENERS"),SNAPSHOT=Symbol("SNAPSHOT"),buildProxyFunction=(objectIs=Object.is,newProxy=(target,handler)=>new Proxy(target,handler),canProxy=x=>isObject(x)&&!refSet.has(x)&&(Array.isArray(x)||!(Symbol.iterator in x))&&!(x instanceof WeakMap)&&!(x instanceof WeakSet)&&!(x instanceof Error)&&!(x instanceof Number)&&!(x instanceof Date)&&!(x instanceof String)&&!(x instanceof RegExp)&&!(x instanceof ArrayBuffer),PROMISE_RESULT=Symbol("PROMISE_RESULT"),PROMISE_ERROR=Symbol("PROMISE_ERROR"),snapshotCache=new WeakMap,createSnapshot=(version,target,receiver)=>{const cache=snapshotCache.get(receiver);if((null==cache?void 0:cache[0])===version)return cache[1];const snapshot2=Array.isArray(target)?[]:Object.create(Object.getPrototypeOf(target));return(0,proxy_compare__WEBPACK_IMPORTED_MODULE_0__.OC)(snapshot2,!0),snapshotCache.set(receiver,[version,snapshot2]),Reflect.ownKeys(target).forEach((key=>{const value=Reflect.get(target,key,receiver);if(refSet.has(value))(0,proxy_compare__WEBPACK_IMPORTED_MODULE_0__.OC)(value,!1),snapshot2[key]=value;else if(value instanceof Promise)if(PROMISE_RESULT in value)snapshot2[key]=value[PROMISE_RESULT];else{const errorOrPromise=value[PROMISE_ERROR]||value;Object.defineProperty(snapshot2,key,{get(){if(PROMISE_RESULT in value)return value[PROMISE_RESULT];throw errorOrPromise}})}else(null==value?void 0:value[LISTENERS])?snapshot2[key]=value[SNAPSHOT]:snapshot2[key]=value})),Object.freeze(snapshot2)},proxyCache=new WeakMap,versionHolder=[1],proxyFunction2=initialObject=>{if(!isObject(initialObject))throw new Error("object required");const found=proxyCache.get(initialObject);if(found)return found;let version=versionHolder[0];const listeners=new Set,notifyUpdate=(op,nextVersion=++versionHolder[0])=>{version!==nextVersion&&(version=nextVersion,listeners.forEach((listener=>listener(op,nextVersion))))},propListeners=new Map,getPropListener=prop=>{let propListener=propListeners.get(prop);return propListener||(propListener=(op,nextVersion)=>{const newOp=[...op];newOp[1]=[prop,...newOp[1]],notifyUpdate(newOp,nextVersion)},propListeners.set(prop,propListener)),propListener},popPropListener=prop=>{const propListener=propListeners.get(prop);return propListeners.delete(prop),propListener},baseObject=Array.isArray(initialObject)?[]:Object.create(Object.getPrototypeOf(initialObject)),proxyObject=newProxy(baseObject,{get:(target,prop,receiver)=>prop===VERSION?version:prop===LISTENERS?listeners:prop===SNAPSHOT?createSnapshot(version,target,receiver):Reflect.get(target,prop,receiver),deleteProperty(target,prop){const prevValue=Reflect.get(target,prop),childListeners=null==prevValue?void 0:prevValue[LISTENERS];childListeners&&childListeners.delete(popPropListener(prop));const deleted=Reflect.deleteProperty(target,prop);return deleted&&notifyUpdate(["delete",[prop],prevValue]),deleted},set(target,prop,value,receiver){var _a;const hasPrevValue=Reflect.has(target,prop),prevValue=Reflect.get(target,prop,receiver);if(hasPrevValue&&objectIs(prevValue,value))return!0;const childListeners=null==prevValue?void 0:prevValue[LISTENERS];let nextValue;return childListeners&&childListeners.delete(popPropListener(prop)),isObject(value)&&(value=(0,proxy_compare__WEBPACK_IMPORTED_MODULE_0__.Ai)(value)||value),(null==(_a=Object.getOwnPropertyDescriptor(target,prop))?void 0:_a.set)?nextValue=value:value instanceof Promise?nextValue=value.then((v=>(nextValue[PROMISE_RESULT]=v,notifyUpdate(["resolve",[prop],v]),v))).catch((e=>{nextValue[PROMISE_ERROR]=e,notifyUpdate(["reject",[prop],e])})):(null==value?void 0:value[LISTENERS])?(nextValue=value,nextValue[LISTENERS].add(getPropListener(prop))):canProxy(value)?(nextValue=proxy(value),nextValue[LISTENERS].add(getPropListener(prop))):nextValue=value,Reflect.set(target,prop,nextValue,receiver),notifyUpdate(["set",[prop],value,prevValue]),!0}});return proxyCache.set(initialObject,proxyObject),Reflect.ownKeys(initialObject).forEach((key=>{const desc=Object.getOwnPropertyDescriptor(initialObject,key);desc.get||desc.set?Object.defineProperty(baseObject,key,desc):proxyObject[key]=initialObject[key]})),proxyObject})=>[proxyFunction2,refSet,VERSION,LISTENERS,SNAPSHOT,objectIs,newProxy,canProxy,PROMISE_RESULT,PROMISE_ERROR,snapshotCache,createSnapshot,proxyCache,versionHolder],[proxyFunction]=buildProxyFunction();function proxy(initialObject={}){return proxyFunction(initialObject)}function subscribe(proxyObject,callback,notifyInSync){let promise;(null==proxyObject?void 0:proxyObject[LISTENERS])||console.warn("Please use proxy object");const ops=[],listener=op=>{ops.push(op),notifyInSync?callback(ops.splice(0)):promise||(promise=Promise.resolve().then((()=>{promise=void 0,callback(ops.splice(0))})))};return proxyObject[LISTENERS].add(listener),()=>{proxyObject[LISTENERS].delete(listener)}}function snapshot(proxyObject){return(null==proxyObject?void 0:proxyObject[SNAPSHOT])||console.warn("Please use proxy object"),proxyObject[SNAPSHOT]}}}]);