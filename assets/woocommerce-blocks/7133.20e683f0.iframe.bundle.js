(self.webpackChunk_woocommerce_block_library=self.webpackChunk_woocommerce_block_library||[]).push([[7133],{"./assets/js/base/hooks/use-previous.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>usePrevious});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");function usePrevious(value,validation){const ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current===value||validation&&!validation(value,ref.current)||(ref.current=value)}),[value,validation]),ref.current}},"./packages/checkout/utils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N2:()=>get_validity_message_for_input,mT:()=>productPriceValidation});var build_module=__webpack_require__("../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js");const must_contain=(value,requiredValue)=>{if(!value.includes(requiredValue))throw Error((0,build_module.nv)((0,build_module.__)('Returned value must include %1$s, you passed "%2$s"',"woocommerce"),requiredValue,value));return!0},get_validity_message_for_input=(label,inputElement,customValidityMessage)=>{if(inputElement.validity.valid||inputElement.validity.customError)return inputElement.validationMessage;const validityMessageCallback=customValidityMessage||(label=>validity=>{const fieldLabel=label?label.toLowerCase():(0,build_module.__)("field","woocommerce"),invalidFieldMessage=(0,build_module.nv)((0,build_module.__)("Please enter a valid %s","woocommerce"),fieldLabel);if(validity.valueMissing||validity.badInput||validity.typeMismatch)return invalidFieldMessage})(label);return validityMessageCallback(inputElement.validity)||inputElement.validationMessage};var postcode_regexes=__webpack_require__("../../node_modules/.pnpm/postcode-validator@3.9.2/node_modules/postcode-validator/lib/cjs/postcode-regexes.js");const CUSTOM_REGEXES=new Map([["BA",/^([7-8]{1})([0-9]{4})$/],["GB",/^([A-Z]){1}([0-9]{1,2}|[A-Z][0-9][A-Z]|[A-Z][0-9]{2}|[A-Z][0-9]|[0-9][A-Z]){1}([ ])?([0-9][A-Z]{2}){1}|BFPO(?:\s)?([0-9]{1,4})$|BFPO(c\/o[0-9]{1,3})$/i],["IN",/^[1-9]{1}[0-9]{2}\s{0,1}[0-9]{3}$/],["JP",/^([0-9]{3})([-]?)([0-9]{4})$/],["KH",/^[0-9]{6}$/],["LI",/^(94[8-9][0-9])$/],["MN",/^[0-9]{5}(-[0-9]{4})?$/],["NI",/^[1-9]{1}[0-9]{4}$/],["NL",/^([1-9][0-9]{3})(\s?)(?!SA|SD|SS)[A-Z]{2}$/i],["SI",/^([1-9][0-9]{3})$/]]),productPriceValidation=(new Map([...postcode_regexes.O,...CUSTOM_REGEXES]),value=>must_contain(value,"<price/>"))},"./packages/components/label/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js");const Label=({label,screenReaderLabel,wrapperElement,wrapperProps={}})=>{let Wrapper;const hasLabel=null!=label,hasScreenReaderLabel=null!=screenReaderLabel;return!hasLabel&&hasScreenReaderLabel?(Wrapper=wrapperElement||"span",wrapperProps={...wrapperProps,className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.A)(wrapperProps.className,"screen-reader-text")},(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Wrapper,{...wrapperProps,children:screenReaderLabel})):(Wrapper=wrapperElement||react__WEBPACK_IMPORTED_MODULE_0__.Fragment,hasLabel&&hasScreenReaderLabel&&label!==screenReaderLabel?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(Wrapper,{...wrapperProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{"aria-hidden":"true",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"screen-reader-text",children:screenReaderLabel})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Wrapper,{...wrapperProps,children:label}))};Label.displayName="Label",Label.__docgenInfo={description:"Component used to render an accessible text given a label and/or a\nscreenReaderLabel. The wrapper element and wrapper props can also be\nspecified via props.",methods:[],displayName:"Label",props:{wrapperProps:{defaultValue:{value:"{}",computed:!1},required:!1,tsType:{name:"union",raw:"HTMLProps< HTMLElement > | undefined",elements:[{name:"HTMLProps",elements:[{name:"HTMLElement"}],raw:"HTMLProps< HTMLElement >"},{name:"undefined"}]},description:""},label:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},screenReaderLabel:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},wrapperElement:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}},composes:["HTMLProps"]};const __WEBPACK_DEFAULT_EXPORT__=Label;Label.__docgenInfo={description:"Component used to render an accessible text given a label and/or a\nscreenReaderLabel. The wrapper element and wrapper props can also be\nspecified via props.",methods:[],displayName:"Label",props:{label:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},screenReaderLabel:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},wrapperElement:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},wrapperProps:{required:!1,tsType:{name:"union",raw:"HTMLProps< HTMLElement > | undefined",elements:[{name:"HTMLProps",elements:[{name:"HTMLElement"}],raw:"HTMLProps< HTMLElement >"},{name:"undefined"}]},description:"",defaultValue:{value:"{}",computed:!1}}},composes:["HTMLProps"]},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/label/index.tsx"]={name:"Label",docgenInfo:Label.__docgenInfo,path:"packages/components/label/index.tsx"})},"./packages/components/text-input/text-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),clsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),_wordpress_html_entities__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/@wordpress+html-entities@3.24.0/node_modules/@wordpress/html-entities/build-module/index.js"),_label__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/label/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./packages/components/text-input/style.scss"),__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"));const TextInput=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({className,id,type="text",ariaLabel,ariaDescribedBy,label,screenReaderLabel,disabled,help,autoCapitalize="off",autoComplete="off",value="",onChange,required=!1,onBlur=()=>{},feedback,...rest},ref)=>{const[isActive,setIsActive]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_4__.A)("wc-block-components-text-input",className,{"is-active":isActive||value}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{type,id,value:(0,_wordpress_html_entities__WEBPACK_IMPORTED_MODULE_5__.S)(value),ref,autoCapitalize,autoComplete,onChange:event=>{onChange(event.target.value)},onFocus:()=>setIsActive(!0),onBlur:event=>{onBlur(event.target.value),setIsActive(!1)},"aria-label":ariaLabel||label,disabled,"aria-describedby":help&&!ariaDescribedBy?id+"__help":ariaDescribedBy,required,...rest}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_label__WEBPACK_IMPORTED_MODULE_1__.A,{label,screenReaderLabel:screenReaderLabel||label,wrapperElement:"label",wrapperProps:{htmlFor:id},htmlFor:id}),!!help&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("p",{id:id+"__help",className:"wc-block-components-text-input__help",children:help}),feedback]})})),__WEBPACK_DEFAULT_EXPORT__=TextInput;TextInput.__docgenInfo={description:"",methods:[],displayName:"TextInput",props:{type:{defaultValue:{value:"'text'",computed:!1},required:!1},autoCapitalize:{defaultValue:{value:"'off'",computed:!1},required:!1},autoComplete:{defaultValue:{value:"'off'",computed:!1},required:!1},value:{defaultValue:{value:"''",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},onBlur:{defaultValue:{value:"() => {\n\t/* Do nothing */\n}",computed:!1},required:!1}}}},"./packages/components/text-input/validated-text-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),clsx__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),_woocommerce_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./assets/js/types/index.ts"),_wordpress_data__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/@wordpress+data@6.15.0_react@18.3.1/node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../node_modules/.pnpm/@wordpress+data@6.15.0_react@18.3.1/node_modules/@wordpress/data/build-module/components/use-select/index.js"),_woocommerce_block_data__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./assets/js/data/validation/index.ts"),_woocommerce_base_hooks__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./assets/js/base/hooks/use-previous.ts"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/@wordpress+compose@5.5.0_react@18.3.1/node_modules/@wordpress/compose/build-module/hooks/use-instance-id/index.js"),_text_input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/text-input/text-input.tsx"),_validation_input_error__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./packages/components/text-input/style.scss"),__webpack_require__("./packages/components/validation-input-error/index.tsx")),_checkout_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/checkout/utils/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js");const ValidatedTextInput=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({className,id,type="text",ariaDescribedBy,errorId,focusOnMount=!1,onChange,showError=!0,errorMessage:passedErrorMessage="",value="",customValidation=()=>!0,customValidityMessage,feedback=null,customFormatter=newValue=>newValue,label,validateOnMount=!0,instanceId:preferredInstanceId="",...rest},forwardedRef)=>{const[isPristine,setIsPristine]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),previousValue=(0,_woocommerce_base_hooks__WEBPACK_IMPORTED_MODULE_7__.Z)(value),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_8__.A)(ValidatedTextInput,"",preferredInstanceId),textInputId=void 0!==id?id:"textinput-"+instanceId,errorIdString=void 0!==errorId?errorId:textInputId,{setValidationErrors,hideValidationError,clearValidationError}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_9__.A)(_woocommerce_block_data__WEBPACK_IMPORTED_MODULE_10__.O),customValidationRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(customValidation);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{customValidationRef.current=customValidation}),[customValidation]);const{validationError,validationErrorId}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_11__.A)((select=>{const store=select(_woocommerce_block_data__WEBPACK_IMPORTED_MODULE_10__.O);return{validationError:store.getValidationError(errorIdString),validationErrorId:store.getValidationErrorId(errorIdString)}})),validateInput=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((errorsHidden=!0)=>{const inputObject=inputRef.current||null;null!==inputObject&&(inputObject.value=inputObject.value.trim(),inputObject.setCustomValidity(""),inputObject.checkValidity()&&customValidationRef.current(inputObject)?clearValidationError(errorIdString):setValidationErrors({[errorIdString]:{message:(0,_checkout_utils__WEBPACK_IMPORTED_MODULE_5__.N2)(label,inputObject,customValidityMessage),hidden:errorsHidden}}))}),[clearValidationError,errorIdString,setValidationErrors,label,customValidityMessage]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(forwardedRef,(function(){return{focus(){inputRef.current?.focus()},revalidate(){validateInput(!value)}}}),[validateInput,value]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(value!==previousValue&&(value||previousValue)&&inputRef&&null!==inputRef.current&&inputRef.current?.ownerDocument?.activeElement!==inputRef.current){const formattedValue=customFormatter(inputRef.current.value);formattedValue!==value?onChange(formattedValue):validateInput(!0)}}),[validateInput,customFormatter,value,previousValue,onChange]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{isPristine&&(setIsPristine(!1),focusOnMount&&inputRef.current?.focus(),!validateOnMount&&focusOnMount||validateInput(!0))}),[validateOnMount,focusOnMount,isPristine,setIsPristine,validateInput]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{clearValidationError(errorIdString)}),[clearValidationError,errorIdString]),""!==passedErrorMessage&&(0,_woocommerce_types__WEBPACK_IMPORTED_MODULE_1__.Gv)(validationError)&&(validationError.message=passedErrorMessage);const hasError=validationError?.message&&!validationError?.hidden,describedBy=showError&&hasError&&validationErrorId?validationErrorId:ariaDescribedBy;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_text_input__WEBPACK_IMPORTED_MODULE_2__.A,{className:(0,clsx__WEBPACK_IMPORTED_MODULE_12__.A)(className,{"has-error":hasError}),"aria-invalid":!0===hasError,id:textInputId,type,feedback:showError&&hasError?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_validation_input_error__WEBPACK_IMPORTED_MODULE_4__.a,{errorMessage:passedErrorMessage,propertyName:errorIdString}):feedback,ref:inputRef,onChange:newValue=>{hideValidationError(errorIdString),validateInput(!0);const formattedValue=customFormatter(newValue);formattedValue!==value&&onChange(formattedValue)},onBlur:()=>validateInput(!1),ariaDescribedBy:describedBy,value,title:"",label,...rest})})),__WEBPACK_DEFAULT_EXPORT__=ValidatedTextInput;ValidatedTextInput.__docgenInfo={description:"A text based input which validates the input value.",methods:[],displayName:"ValidatedTextInput",props:{type:{defaultValue:{value:"'text'",computed:!1},required:!1},focusOnMount:{defaultValue:{value:"false",computed:!1},required:!1},showError:{defaultValue:{value:"true",computed:!1},required:!1},errorMessage:{defaultValue:{value:"''",computed:!1},required:!1},value:{defaultValue:{value:"''",computed:!1},required:!1},customValidation:{defaultValue:{value:"() => true",computed:!1},required:!1},feedback:{defaultValue:{value:"null",computed:!1},required:!1},customFormatter:{defaultValue:{value:"( newValue: string ) => newValue",computed:!1},required:!1},validateOnMount:{defaultValue:{value:"true",computed:!1},required:!1},instanceId:{defaultValue:{value:"''",computed:!1},required:!1}}}},"./packages/components/text-input/style.scss":()=>{}}]);