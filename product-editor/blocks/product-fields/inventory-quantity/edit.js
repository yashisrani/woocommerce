"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Edit=void 0;const block_templates_1=require("@woocommerce/block-templates"),compose_1=require("@wordpress/compose"),core_data_1=require("@wordpress/core-data"),element_1=require("@wordpress/element"),i18n_1=require("@wordpress/i18n"),components_1=require("@wordpress/components"),validation_context_1=require("../../../contexts/validation-context");function Edit({attributes,clientId,context}){const blockProps=(0,block_templates_1.useWooBlockProps)(attributes),[manageStock]=(0,core_data_1.useEntityProp)("postType",context.postType,"manage_stock"),[stockQuantity,setStockQuantity]=(0,core_data_1.useEntityProp)("postType",context.postType,"stock_quantity"),stockQuantityId=(0,compose_1.useInstanceId)(components_1.BaseControl,"product_stock_quantity"),{ref:stockQuantityRef,error:stockQuantityValidationError,validate:validateStockQuantity}=(0,validation_context_1.useValidation)(`stock_quantity-${clientId}`,(async function stockQuantityValidator(){if(manageStock&&stockQuantity&&stockQuantity<0)return{message:(0,i18n_1.__)("Stock quantity must be a positive number.","woocommerce")}}),[manageStock,stockQuantity]);return(0,element_1.useEffect)((()=>{manageStock&&null===stockQuantity&&setStockQuantity(1)}),[manageStock,stockQuantity]),(0,element_1.createElement)("div",{...blockProps},(0,element_1.createElement)("div",{className:"wp-block-columns"},(0,element_1.createElement)("div",{className:"wp-block-column"},(0,element_1.createElement)(components_1.BaseControl,{id:stockQuantityId,className:stockQuantityValidationError&&"has-error",help:null!=stockQuantityValidationError?stockQuantityValidationError:""},(0,element_1.createElement)(components_1.__experimentalInputControl,{id:stockQuantityId,name:"stock_quantity",ref:stockQuantityRef,label:(0,i18n_1.__)("Available stock","woocommerce"),value:stockQuantity,onChange:setStockQuantity,onBlur:validateStockQuantity,type:"number",min:0}))),(0,element_1.createElement)("div",{className:"wp-block-column"})))}exports.Edit=Edit;