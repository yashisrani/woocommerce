"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaLibrary=void 0;const element_1=require("@wordpress/element");function MediaLibrary({allowedTypes,modalTitle,modalButtonText,multiple,className,uploaderParams,children,onSelect}){const mediaLibraryModal=(0,element_1.useMemo)((function createMediaLibraryModal(){return wp.media({title:modalTitle,library:{type:allowedTypes},button:{text:modalButtonText},multiple,states:[new wp.media.controller.Library({title:modalTitle,library:wp.media.query(),multiple,priority:20,filterable:"all"})]})}),[allowedTypes,modalTitle,modalButtonText,multiple]);return(0,element_1.useEffect)((function initializeEvents(){function handleSelect(){const mediaItems=mediaLibraryModal.state().get("selection").toJSON();onSelect(mediaItems)}function handleReady(){mediaLibraryModal.uploader.options.uploader.params=uploaderParams}return mediaLibraryModal.on("select",handleSelect),mediaLibraryModal.on("ready",handleReady),function unmountMediaLibraryModal(){mediaLibraryModal.off("select",handleSelect),mediaLibraryModal.off("ready",handleReady)}}),[mediaLibraryModal,uploaderParams,onSelect]),(0,element_1.useEffect)((()=>function unmountMediaLibraryModal(){mediaLibraryModal.remove()}),[mediaLibraryModal]),children({open:function openMediaLibraryModal(){mediaLibraryModal.$el.addClass(className),mediaLibraryModal.open()}})}exports.MediaLibrary=MediaLibrary;