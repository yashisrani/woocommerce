"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Edit=void 0;const element_1=require("@wordpress/element"),components_1=require("@wordpress/components"),block_templates_1=require("@woocommerce/block-templates"),tracks_1=require("@woocommerce/tracks"),core_data_1=require("@wordpress/core-data"),sanitize_html_1=require("../../../utils/sanitize-html"),use_product_entity_prop_1=__importDefault(require("../../../hooks/use-product-entity-prop")),constants_1=require("../../../constants");function Edit({attributes,context:{postType}}){var _a,_b,_c;const blockProps=(0,block_templates_1.useWooBlockProps)(attributes),{_templateBlockId,label,property,disabled,disabledCopy,checkedValue,uncheckedValue}=attributes,[value,setValue]=(0,use_product_entity_prop_1.default)(property,{postType,fallbackValue:!1}),productId=(0,core_data_1.useEntityId)("postType",postType),[parentId]=(0,core_data_1.useEntityProp)("postType",postType,"parent_id");function isChecked(){return void 0!==checkedValue?checkedValue===value:value}let help=null;return(null==attributes?void 0:attributes.help)&&(help=(0,element_1.createElement)("div",{dangerouslySetInnerHTML:{__html:null===(_a=(0,sanitize_html_1.sanitizeHTML)(attributes.help))||void 0===_a?void 0:_a.__html}})),(null==attributes?void 0:attributes.checkedHelp)&&isChecked()&&(help=(0,element_1.createElement)("div",{dangerouslySetInnerHTML:{__html:null===(_b=(0,sanitize_html_1.sanitizeHTML)(attributes.checkedHelp))||void 0===_b?void 0:_b.__html}})),(null==attributes?void 0:attributes.uncheckedHelp)&&!isChecked()&&(help=(0,element_1.createElement)("div",{dangerouslySetInnerHTML:{__html:null===(_c=(0,sanitize_html_1.sanitizeHTML)(attributes.uncheckedHelp))||void 0===_c?void 0:_c.__html}})),(0,element_1.createElement)("div",{...blockProps},(0,element_1.createElement)(components_1.ToggleControl,{label,checked:isChecked(),disabled,onChange:function handleChange(checked){(0,tracks_1.recordEvent)("product_toggle_click",{block_id:_templateBlockId,source:constants_1.TRACKS_SOURCE,product_id:parentId>0?parentId:productId}),setValue(checked?void 0!==checkedValue?checkedValue:checked:void 0!==uncheckedValue?uncheckedValue:checked)},help}),disabled&&(0,element_1.createElement)("p",{className:"wp-block-woocommerce-product-toggle__disable-copy",dangerouslySetInnerHTML:(0,sanitize_html_1.sanitizeHTML)(disabledCopy)}))}exports.Edit=Edit;