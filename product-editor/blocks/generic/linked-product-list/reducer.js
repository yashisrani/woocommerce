"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRemoveLinkedProductDispatcher=exports.getSelectSearchedProductDispatcher=exports.getLoadLinkedProductsDispatcher=exports.reducer=void 0;const data_1=require("@wordpress/data"),data_2=require("@woocommerce/data");function reducer(state,action){switch(action.type){case"SELECT_SEARCHED_PRODUCT":case"REMOVE_LINKED_PRODUCT":return action.payload.selectedProduct?{...state,...action.payload}:state;default:return{...state,...action.payload}}}function getLoadLinkedProductsDispatcher(dispatch){return async function loadLinkedProductsDispatcher(linkedProductIds){return 0===linkedProductIds.length?(dispatch({type:"SET_LINKED_PRODUCTS",payload:{linkedProducts:[]}}),Promise.resolve([])):(dispatch({type:"LOADING_LINKED_PRODUCTS",payload:{isLoading:!0}}),(0,data_1.resolveSelect)(data_2.PRODUCTS_STORE_NAME).getProducts({include:linkedProductIds}).then((response=>(dispatch({type:"SET_LINKED_PRODUCTS",payload:{linkedProducts:response}}),response))).finally((()=>{dispatch({type:"LOADING_LINKED_PRODUCTS",payload:{isLoading:!1}})})))}}function getSelectSearchedProductDispatcher(dispatch){return function selectSearchedProductDispatcher(selectedProduct,linkedProducts){Array.isArray(selectedProduct)||(selectedProduct=[selectedProduct]);const newLinkedProducts=[...linkedProducts,...selectedProduct];return dispatch({type:"SELECT_SEARCHED_PRODUCT",payload:{selectedProduct,linkedProducts:newLinkedProducts}}),newLinkedProducts.map((product=>product.id))}}function getRemoveLinkedProductDispatcher(dispatch){return function removeLinkedProductDispatcher(selectedProduct,linkedProducts){const newLinkedProducts=linkedProducts.reduce(((list,current)=>current.id===selectedProduct.id?list:[...list,current]),[]);return dispatch({type:"REMOVE_LINKED_PRODUCT",payload:{selectedProduct,linkedProducts:newLinkedProducts}}),newLinkedProducts.map((product=>product.id))}}exports.reducer=reducer,exports.getLoadLinkedProductsDispatcher=getLoadLinkedProductsDispatcher,exports.getSelectSearchedProductDispatcher=getSelectSearchedProductDispatcher,exports.getRemoveLinkedProductDispatcher=getRemoveLinkedProductDispatcher;