"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TabBlockEdit=void 0;const i18n_1=require("@wordpress/i18n"),block_editor_1=require("@wordpress/block-editor"),classnames_1=__importDefault(require("classnames")),element_1=require("@wordpress/element"),block_templates_1=require("@woocommerce/block-templates"),components_1=require("@woocommerce/components"),tab_button_1=require("./tab-button");function TabBlockEdit({setAttributes,attributes,context}){const blockProps=(0,block_templates_1.useWooBlockProps)(attributes),{id,title,_templateBlockOrder:order,isSelected}=attributes,classes=(0,classnames_1.default)("wp-block-woocommerce-product-tab__content",{"is-selected":isSelected}),[canRenderChildren,setCanRenderChildren]=(0,element_1.useState)(!1);return(0,element_1.useEffect)((()=>{if(!context.selectedTab)return;const isSelectedInContext=context.selectedTab===id;if(setAttributes({isSelected:isSelectedInContext}),isSelectedInContext)return void setCanRenderChildren(!0);const timeoutId=setTimeout(setCanRenderChildren,300,!0);return()=>clearTimeout(timeoutId)}),[context.selectedTab,id,setAttributes]),(0,element_1.createElement)("div",{...blockProps},(0,element_1.createElement)(tab_button_1.TabButton,{id,selected:isSelected,order},title),(0,element_1.createElement)("div",{id:`woocommerce-product-tab__${id}-content`,"aria-labelledby":`woocommerce-product-tab__${id}`,role:"tabpanel",className:classes},(0,element_1.createElement)(components_1.__experimentalErrorBoundary,{errorMessage:(0,i18n_1.__)("An unexpected error occurred in this tab. Make sure any unsaved changes are saved and then try reloading the page to see if the error recurs.","woocommerce"),onError:(error,errorInfo)=>{console.error(`Error caught in tab '${id}'`,error,errorInfo)}},canRenderChildren&&(0,element_1.createElement)(block_editor_1.InnerBlocks,{templateLock:"contentOnly"}))))}exports.TabBlockEdit=TabBlockEdit;